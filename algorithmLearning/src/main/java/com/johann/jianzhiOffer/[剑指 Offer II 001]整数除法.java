package com.johann.jianzhiOffer;
//ç»™å®šä¸¤ä¸ªæ•´æ•° a å’Œ b ï¼Œæ±‚å®ƒä»¬çš„é™¤æ³•çš„å•† a/b ï¼Œè¦æ±‚ä¸å¾—ä½¿ç”¨ä¹˜å· '*'ã€é™¤å· '/' ä»¥åŠæ±‚ä½™ç¬¦å· '%' ã€‚
//
// 
//
// æ³¨æ„ï¼š 
//
// 
// æ•´æ•°é™¤æ³•çš„ç»“æœåº”å½“æˆªå»ï¼ˆtruncateï¼‰å…¶å°æ•°éƒ¨åˆ†ï¼Œä¾‹å¦‚ï¼štruncate(8.345) = 8 ä»¥åŠ truncate(-2.7335) = -2 
// å‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒåªèƒ½å­˜å‚¨ 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå…¶æ•°å€¼èŒƒå›´æ˜¯ [âˆ’2Â³Â¹, 2Â³Â¹âˆ’1]ã€‚æœ¬é¢˜ä¸­ï¼Œå¦‚æœé™¤æ³•ç»“æœæº¢å‡ºï¼Œåˆ™è¿”å› 231 âˆ’ 1 
// 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼ša = 15, b = 2
//è¾“å‡ºï¼š7
//è§£é‡Šï¼š15/2 = truncate(7.5) = 7
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//è¾“å…¥ï¼ša = 7, b = -3
//è¾“å‡ºï¼š-2
//è§£é‡Šï¼š7/-3 = truncate(-2.33333..) = -2 
//
// ç¤ºä¾‹ 3ï¼š 
//
// 
//è¾“å…¥ï¼ša = 0, b = 1
//è¾“å‡ºï¼š0 
//
// ç¤ºä¾‹ 4ï¼š 
//
// 
//è¾“å…¥ï¼ša = 1, b = 1
//è¾“å‡ºï¼š1 
//
// 
//
// æç¤º: 
//
// 
// -2Â³Â¹ <= a, b <= 2Â³Â¹ - 1 
// b != 0 
// 
//
// 
//
// æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 29 é¢˜ç›¸åŒï¼šhttps://leetcode-cn.com/problems/divide-two-integers/ 
//
// 
//
// Related Topics ä½è¿ç®— æ•°å­¦ ğŸ‘ 195 ğŸ‘ 0


//leetcode submit region begin(Prohibit modification and deletion)
class SolutionJianzhiII001 {
    public int divide(int a, int b) {
        if(a == Integer.MIN_VALUE && b == -1){
            //å¦‚æœé™¤æ•°æ˜¯Integeræœ€å°å€¼ï¼Œä¸”è¢«é™¤æ•°æ˜¯-1ï¼Œæ­¤æ—¶ç›¸é™¤ä¼šæº¢å‡ºã€‚
            return Integer.MAX_VALUE;
        }else if (a == 0){
            //å¦‚æœè¢«é™¤æ•°æ˜¯0ï¼Œç›´æ¥è¿”å› 0
            return 0;
        }
        //åˆ¤æ–­æœ€ç»ˆçš„å•†æ˜¯æ­£æ•°ï¼Œè¿˜æ˜¯è´Ÿæ•°
        boolean positiveFlag = (a>0&&b<0) || (a<0&&b>0);
        //å°† a,bè½¬ä¸ºè´Ÿæ•°ï¼Œé˜²æ­¢è´Ÿæ•´æ•°è½¬æ­£æ•°æº¢å‡ºæƒ…å†µ
        if (a > 0){
            a = ~(a-1);
        }
        if (b > 0){
            b = ~(b-1);
        }
        //å•†
        int quotient = 0;
        //å–ååï¼Œå¦‚æœ è¢«é™¤æ•° > é™¤æ•°ï¼ˆå³|a| < |b|ï¼‰ï¼Œæ­¤æ—¶ç›´æ¥è¿”å› 0
        if (a > b) {
            return 0;
        //å–ååï¼Œå¦‚æœ è¢«é™¤æ•° = é™¤æ•°ï¼ˆå³|a| = |b|ï¼‰æˆ–è€… è¢«é™¤æ•° > é™¤æ•°*2ï¼ˆå³|a| -|b| < |b|ï¼‰ï¼Œæ­¤æ—¶å•†æš‚æ—¶å– 1ã€‚å…·ä½“æ˜¯+1è¿˜æ˜¯-1æ ¹æ®ç¬¦å·åˆ¤æ–­
        }else if (a == b || a - b > b) {
            quotient = 1;
        //å¦‚æœè¢«é™¤æ•° < é™¤æ•°*2ï¼ˆå³|a| -|b| >= |b|ï¼‰
        }else {
            //å·¦ç§»è¿›ä½ç»Ÿè®¡ï¼ˆä¹˜2ï¼‰
            int carryCount = 1;
            //ä¸­é—´å€¼
            int temp = 0;
            /**
             * ç»Ÿè®¡é™¤æ•°éœ€è¦å·¦ç§»å¤šå°‘ä½ï¼Œæ‰ä¼šä¸å°äºè¢«é™¤æ•°
             */
            while ((temp = (b << carryCount)) >= a){
                /**
                 * å¦‚æœ tempç°åœ¨è¶…è¿‡äº† a çš„ä¸€åŠï¼Œç»ˆæ­¢å¾ªç¯
                 * æ­¤å¤„ä¸èƒ½ç”¨ temp + temp < aï¼Œå¦‚æœaä¸ºInteger.MIN_VALUEæ—¶ï¼Œè¿™æ ·ä¼šæº¢å‡ºï¼Œå¯¼è‡´æ­»å¾ªç¯
                 * ä¹Ÿå¯ä»¥ç”¨ a >> 1 > temp
                 */
                if (a - temp > temp) {
                    break;
                }
                //å·¦ç§»ä½æ•°ç»Ÿè®¡
                carryCount++;
            }
            //å½“å‰å•†å€¼ç´¯åŠ 
            quotient += 1 << (carryCount);
            //ä¸­é—´æ•°ç´¯åŠ ï¼Œæ­¤æ—¶ä¸­é—´æ•°ä¸ºä¸€ä¸ªæé™å€¼ï¼Œå³è¿™ä¸ªä¸­é—´æ•°å†å·¦ç§»çš„è¯ï¼Œå°±è¶…è¿‡äº†è¢«é™¤æ•° a
            temp = b << carryCount;
            //å¾ªç¯å·¦ç§»ä½æ•°
            while(carryCount > 0){
                //æŸ¥çœ‹å½“å‰temp ä¸ è¢«é™¤æ•°æ˜¯å¦ç›¸ç­‰ã€‚å¦‚æœ è¢«é™¤æ•°åˆšå¥½æ˜¯é™¤æ•°çš„2^nå€ï¼Œç›´æ¥ç»ˆæ­¢å¾ªç¯
                if (temp == a){
                    break;
                }else {
                    //ä¸­é—´æ•°æ¯æ¬¡åŠ ä¸Šè‡ªå·±çš„ä¸€åŠï¼Œå°†æ–°çš„ä¸­é—´æ•°ä¸è¢«é™¤æ•°ä½œæ¯”è¾ƒã€‚å¦‚æœæ–°çš„ä¸­é—´æ•°ä»å¤§äºè¢«é™¤æ•°ï¼Œåˆ™éœ€è¦ç»§ç»­ç´¯åŠ å•†å’Œä¸­é—´æ•°ï¼Œå¾ªç¯éå†ä¸‹ä¸€è½®
                    if (a - temp  < (b << (carryCount-1))){
                        quotient += 1 << (carryCount-1);
                        temp += b << (carryCount-1);
                    //ä¸­é—´æ•°æ¯æ¬¡åŠ ä¸Šè‡ªå·±çš„ä¸€åŠï¼Œæ–°çš„ä¸­é—´æ•°ç­‰äºè¢«é™¤æ•°ï¼Œåˆ™ç´¯åŠ å•†ï¼Œç»ˆæ­¢å¾ªç¯
                    }else if(a - temp == (b << (carryCount-1))){
                        quotient += 1 << (carryCount-1);
                        break;
                    }
                    carryCount--;
                }
            }
        }
        //å•†å€¼å–è´Ÿæ•°
        if (positiveFlag){
            quotient = ~(quotient-1);
        }
        return quotient;
    }

    public static void main(String[] args) {
//        int m = -5;
//        int n = m << 1;
//        int o = m >> 1;
//        int mf = ~(m-1);
//        System.out.println(n);
//        System.out.println(o);
//        System.out.println(mf);
//
//        int x = Integer.MIN_VALUE+1;
//        int y = ~(x-1);
//        System.out.println(x);
//        System.out.println(y);
//        System.out.println(~(1));
        int a = 1100540749;
        int b = -1090366779;
        System.out.println(a/b);
        System.out.println(new SolutionJianzhiII001().divide(a,b));

    }
}
//leetcode submit region end(Prohibit modification and deletion)
