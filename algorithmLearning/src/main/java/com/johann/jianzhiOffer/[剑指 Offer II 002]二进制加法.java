package com.johann.jianzhiOffer;
//ç»™å®šä¸¤ä¸ª 01 å­—ç¬¦ä¸² a å’Œ b ï¼Œè¯·è®¡ç®—å®ƒä»¬çš„å’Œï¼Œå¹¶ä»¥äºŒè¿›åˆ¶å­—ç¬¦ä¸²çš„å½¢å¼è¾“å‡ºã€‚
//
// è¾“å…¥ä¸º éç©º å­—ç¬¦ä¸²ä¸”åªåŒ…å«æ•°å­— 1 å’Œ 0ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1: 
//
// 
//è¾“å…¥: a = "11", b = "10"
//è¾“å‡º: "101" 
//
// ç¤ºä¾‹ 2: 
//
// 
//è¾“å…¥: a = "1010", b = "1011"
//è¾“å‡º: "10101" 
//
// 
//
// æç¤ºï¼š 
//
// 
// æ¯ä¸ªå­—ç¬¦ä¸²ä»…ç”±å­—ç¬¦ '0' æˆ– '1' ç»„æˆã€‚ 
// 1 <= a.length, b.length <= 10^4 
// å­—ç¬¦ä¸²å¦‚æœä¸æ˜¯ "0" ï¼Œå°±éƒ½ä¸å«å‰å¯¼é›¶ã€‚ 
// 
//
// 
//
// 
// æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 67 é¢˜ç›¸åŒï¼šhttps://leetcode-cn.com/problems/add-binary/ 
//
// Related Topics ä½è¿ç®— æ•°å­¦ å­—ç¬¦ä¸² æ¨¡æ‹Ÿ ğŸ‘ 50 ğŸ‘ 0


import org.junit.Test;

//leetcode submit region begin(Prohibit modification and deletion)
class SolutionJianzhiII002 {
    public String addBinary(String a, String b) {
        //ä¼ å…¥çš„ä¸¤ä¸ªå­—ç¬¦çš„æœ€å¤§é•¿åº¦
        int lenMax = (a.length() > b.length() ? a.length() : b.length());
        //ä¼ å…¥çš„ä¸¤ä¸ªå­—ç¬¦çš„é•¿åº¦å·®å€¼
        int lenDiff = (a.length() > b.length() ? a.length() - b.length() : b.length() - a.length());
        //è¿›è¡ŒåŠ æ³•åï¼Œæ–°çš„å­—ç¬¦æ•°ç»„çš„é•¿åº¦ã€‚è€ƒè™‘åˆ°ä¸¤ä¸ªäºŒè¿›åˆ¶æ•°ç›¸åŠ ï¼Œæœ€ç»ˆç»“æœå¯èƒ½è¶…å‡ºåŸæ¥çš„äºŒè¿›åˆ¶æ•°çš„ä½æ•°ï¼Œæ­¤æ—¶é€‰æ‹© lenMax+1
        char[] addCharArray = new char[lenMax + 1];
        //ä»æœ«ç«¯ï¼ˆå³æœ€ä½ä½ï¼‰å¼€å§‹éå†å­—ç¬¦ä¸²
        int index = lenMax - 1;
        //äºŒè¿›åˆ¶å¯¹åº”ä½è¿›è¡ŒåŠ æ³•æ“ä½œåçš„è¿›ä½
        char carry = '0';
        //ç”±æ–°çš„å­—ç¬¦æ•°ç»„ç”Ÿæˆå­—ç¬¦ä¸²æ—¶çš„åç§»é‡
        int offset = 0;
        //ä»åå¾€å‰å¼€å§‹éå†å­—ç¬¦ä¸²ï¼ˆä»æœ€ä½ä½åˆ°æœ€é«˜ä½ï¼‰
        while (index >= 0) {
            /**
             * å¦‚æœå½“å‰å­—ç¬¦æ˜¯ä¸€ä¸ªè¾ƒçŸ­çš„é‚£ä¸ªå­—ç¬¦ï¼Œæ­¤æ—¶ä¸é•¿å­—ç¬¦ä¸²çš„indexå¤„äºç›¸åŒçš„äºŒè¿›åˆ¶ä½çš„ï¼ŒçŸ­å­—ç¬¦ä¸²çš„indexï¼Œåº”ä¸º index-lenDiffã€‚
             * å¦‚æœçŸ­å­—ç¬¦ä¸²å˜æ›´åçš„å®é™…ç´¢å¼•é‡[index-lenDiff]è¶…å‡ºä¸‹é™ 0ï¼Œæ­¤æ—¶ç”¨ '0' æ¥è¡¥å……ã€‚
             *
             * ç¤ºä¾‹ï¼š
             *     a = "1", b="1111"
             *     æ­¤æ—¶ lenMax = 4,lenDiff = 3
             *     å½“bçš„indexä¸º3æ—¶ï¼Œaçš„ç›¸åŒäºŒè¿›åˆ¶ä½çš„å®é™…ç´¢å¼•é‡ï¼Œåº”ä¸º index-lenDiff=0ï¼›
             *     å½“bçš„indexä¸º2æ—¶ï¼Œaçš„ç›¸åŒäºŒè¿›åˆ¶ä½çš„å®é™…ç´¢å¼•é‡ï¼Œåº”ä¸º index-lenDiff=-1ï¼Œè¶…å‡ºä¸‹é™ï¼Œç”¨'0'è¡¥å……ã€‚
             *     a ç´¢å¼•ä¸äºŒè¿›åˆ¶ä½å¯¹åº”å…³ç³» ã€-3--'0', -2--'0', -1--'0', 0--'1'ã€‘
             *     b ç´¢å¼•ä¸äºŒè¿›åˆ¶ä½å¯¹åº”å…³ç³» ã€ 0--'1',  1--'1',  2--'1', 3--'1'ã€‘
             */
            char aChar = lenMax > a.length() ? (index - lenDiff >= 0 ? a.charAt(index - lenDiff) : '0') : a.charAt(index);
            char bChar = lenMax > b.length() ? (index - lenDiff >= 0 ? b.charAt(index - lenDiff) : '0') : b.charAt(index);

            /**
             * æ­¤å¤„æ¨èä¸€æœ¬ä¹¦ã€Šç¼–ç çš„å¥¥ç§˜ã€‹
             * 1ï¼‰å½“ä¸¤ä¸ªäºŒè¿›åˆ¶ä½ç›¸åŒæ—¶ï¼Œç›¸åŠ ç»“æœä¸­å½“å‰çš„äºŒè¿›åˆ¶ä½ç»“æœä¸º 0 (1+1=10,0+0=0)ã€‚è€ƒè™‘åˆ°å‰ä¸€ä½è¿›ä½çš„å½±å“ï¼Œåˆ™ç»“æœä¸­å½“å‰äºŒè¿›åˆ¶ä½çš„ç»“æœä¸ºè¿›ä½å€¼ï¼›
             *     addCharArray[index + 1] = carry;
             *     å½“å‰ä½çš„è¿›ä½ç”±åŠ æ•°å†³å®šã€‚
             *     carry = (aChar == '1' ? '1' : '0');
             * 2ï¼‰å½“ä¸¤ä¸ªäºŒè¿›åˆ¶ä½ä¸åŒæ—¶ï¼Œç›¸åŠ çš„ç»“æœä¸º 1ã€‚å†åŠ ä¸Šå‰ä¸€ä½è¿›ä½çš„å½±å“ï¼Œ
             *     å¦‚æœå‰ä¸€ä½è¿›ä½ä¸º 1ï¼Œåˆ™å½“å‰ä½ç»“æœä¸º 0ï¼Œå½“å‰ä½çš„è¿›ä½ä¸º 1ï¼›
             *     å¦‚æœå‰ä¸€ä½è¿›ä½ä¸º 0ï¼Œåˆ™å½“å‰ä½ç»“æœä¸º 1ï¼Œå½“å‰ä½çš„è¿›ä½ä¸º 0ï¼›
             *     addCharArray[index + 1] = carry == '1' ? '0' : '1';
             *     carry = carry == '1' ? '1' : '0';
             */
            if (aChar == bChar) {
                addCharArray[index + 1] = carry;
                carry = aChar;
            } else {
                addCharArray[index + 1] = carry == '1' ? '0' : '1';
            }
            /**
             * å½“éå†åˆ°é•¿å­—ç¬¦ä¸²çš„è¾¹ç•Œæ—¶ï¼Œæ­¤æ—¶è¦è€ƒè™‘æœ€é«˜ä½ç›¸åŠ ç»“æœäº§ç”Ÿè¿›ä½çš„é—®é¢˜ï¼Œå¤šé¢„ç•™å‡ºæ¥çš„ä¸€ä½ç”¨æ¥å¡«å……è¿›ä½ç»“æœã€‚
             * å¦‚æœä¸¤ä¸ªåŠ æ•°ï¼Œæœ€é«˜ä½çš„ç›¸åŠ ç»“æœæ²¡æœ‰äº§ç”Ÿè¿›ä½ï¼Œæ­¤æ—¶è®¾ç½®æ–°å­—ç¬¦æ•°ç»„çš„æ•°ç»„åç§»é‡ offset = 1, count = lenMaxï¼Œç”Ÿæˆæ–°å­—ç¬¦ä¸²æ—¶ä¸åŒ…å«æœ€é«˜ä½ï¼›
             * å¦‚æœä¸¤ä¸ªåŠ æ•°ï¼Œæœ€é«˜ä½çš„ç›¸åŠ ç»“æœäº§ç”Ÿè¿›ä½ï¼Œæ­¤æ—¶è®¾ç½® offset = 0, count = lenMax+1ã€‚
             */
            if (index == 0) {
                addCharArray[index] = carry;
                offset = carry == '1' ? 0 : 1;
                lenMax = carry == '1' ? lenMax + 1 : lenMax;
            }
            //æ§åˆ¶å¾ªç¯ï¼Œä»åå¾€å‰è¿›è¡Œå¾ªç¯éå†
            index--;
        }
        //è¿”å›æ–°ç”Ÿæˆçš„å­—ç¬¦ä¸²
        return new String(addCharArray, offset, lenMax);
    }

    public static void main(String[] args) {
        String a = "1";
        String b = "111";
        String addResult = new SolutionJianzhiII002().addBinary(a, b);
        System.out.println(addResult);
    }
}
//leetcode submit region end(Prohibit modification and deletion)
