<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>列表渲染</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="">
    <script src="https://unpkg.com/vue@next"></script>
    <style type="text/css">
        .demo {
            font-family: sans-serif;
            border: 1px solid rgb(34, 145, 130);
            border-radius: 2px;
            padding: 20px 30px;
            margin-top: 1em;
            margin-bottom: 40px;
            user-select: none;
            overflow-x: auto;
        }
    </style>
</head>

<body>
    <div id="app">
        <!-- 我们可以用 v-for 指令基于一个数组来渲染一个列表。v-for 指令需要使用 item in items 形式的特殊语法，
                其中 items 是源数据数组，而 item 则是被迭代的数组元素的别名。 

                在 v-for 块中，我们可以访问所有父作用域的 property。v-for 还支持一个可选的第二个参数，即当前项的索引。

                你也可以用 of 替代 in 作为分隔符，因为它更接近 JavaScript 迭代器的语法
        -->
        <div class="demo">
            <ol>
                <!-- <li v-for="(item, index) in messageArray" :key="index"> -->
                <li v-for="(item) of messageArray" :key="item.message">
                    {{ parentMessage }} - {{ item }} - {{ item.message }}
                </li>
            </ol>
            <button @click="push">push</button><br>
            <button @click="pop">pop</button><br>
            <button @click="filter">filter</button><br>
            <!-- <button @click="sort">sort</button><br> -->
        </div>

        <!-- 也可以用 v-for 来遍历一个对象的 property。 -->
        <!-- v-for 
            如果传入一个参数，则指向被迭代的数组元素；
            如果传入两个参数，则 第一个参数指向数组元素，第二个指向键名 key  
            如果传入三个参数，则 第一个参数指向数组元素，第二个指向键名 key ，第三个作为索引 
        -->
        <div class="demo">
            <ul>
                <li v-for="(value, name, index) in myObject">
                    {{ index }}. {{ name }} : {{ value }}
                </li>
            </ul>
        </div>


        <!-- 显示过滤/排序后的结果 -->
        <!-- 有时，我们想要显示一个数组经过过滤或排序后的版本，而不实际变更或重置原始数据。
            在这种情况下，可以创建一个计算属性，来返回过滤或排序后的数组。 -->
        <div class="demo">
            <ul>
                <li v-for="n in evenNumbers" :key="n">
                    {{ n }}
                </li>
            </ul>
        </div>

        <!-- 在计算属性不适用的情况下 (例如，在嵌套的 v-for 循环中) 你可以使用一个方法 -->
        <div class="demo">
            <ul v-for="numbers in numberSet">
                <li v-for="n in even(numbers)" :key="n">
                    {{ n }}
                </li>
            </ul>
        </div>

        <!-- v-for 也可以接受整数。在这种情况下，它会把模板重复对应次数。 -->
        <div id="range" class="demo">
            <span v-for="n in 10" :key="n">{{ n }}</span>
        </div>

        <!-- 类似于 v-if，你也可以利用带有 v-for 的 <template> 来循环渲染一段包含多个元素的内容。 -->
        <ul>
            <template v-for="item in messageArray" :key="item.message">
                <li>{{ item.message }}</li>
                <li class="divider" role="presentation"></li>
            </template>
        </ul>

        <!-- 不推荐在同一元素上使用 v-if 和 v-for -->
        <div class="demo">
            <!-- 当它们处于同一节点，v-if 的优先级比 v-for 更高，这意味着 v-if 将没有权限访问 v-for 里的变量 
                此处报错：Property "todo" was accessed during render but is not defined on instance. 
            -->
            <!-- <li v-for="todo in todos" v-if="!todo.isComplete">
                {{ todo.name }}
            </li> -->

            <!-- 可以把 v-for 移动到 <template> 标签中来修正 -->
            <template v-for="todo in todos" :key="todo.text">
                <li v-if="!todo.isComplete">
                    {{ todo.text }}
                </li>
            </template>
        </div>

        <!-- TODO: 组件学习完后待做-->
        <!-- 在组件上使用 v-for  -->




    </div>






    <script>
        const App = {
            data() {
                return {
                    parentMessage: 'Parent',
                    messageArray: [{ message: 'Foo' }, { message: 'Bar' }],
                    myObject: {
                        title: 'How to do lists in Vue',
                        author: 'Jane Doe',
                        publishedAt: '2016-04-10'
                    },
                    numbers: [1, 2, 3, 4, 5, 6, 7, 8, 9],
                    numberSet: [[1, 2, 3, 4, 5], [6, 7, 8, 9]],
                    todos: [
                        { text: 'Learn JavaScript' },
                        { text: 'Learn Vue' },
                        { text: 'Build something awesome' }
                    ]
                }
            },
            methods: {
                /**
                 * Vue 将被侦听的数组的变更方法进行了包裹，所以它们也将会触发视图更新。这些被包裹过的方法包括：
                    push()
                    pop()
                    shift()
                    unshift()
                    splice()
                    sort()
                    reverse()
                 */
                push() {
                    this.messageArray.push({ message: 'Foo' });
                    this.messageArray.push({ message: 'Bar' });
                    this.messageArray.push({ message: 'Baz' });
                    this.messageArray.push({ message: 'Qux' });
                },
                pop() {
                    this.messageArray.pop();
                },
                filter() {
                    this.messageArray = this.messageArray.filter(item => item.message.match(/Foo/));
                },
                // 未生效
                // sort(){
                //     this.messageArray = this.messageArray.sort(function(a,b){return a-b});
                // }

                even(numbers) {
                    return numbers.filter(number => number % 2 === 0)
                }
            },
            computed: {
                evenNumbers() {
                    return this.numbers.filter(number => number % 2 === 0);
                }
            },
            watch: {

            },
            mounted() {

            },

        }
        const app = Vue.createApp(App);
        const vm = app.mount("#app");
    </script>
</body>

</html>